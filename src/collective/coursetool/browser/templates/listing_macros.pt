<html>
    <body>
        <metal:def define-macro="filter">
            <form action="${python:context.absolute_url()}" class="row g-3 mb-3 align-items-end">
                <div class="col">
                    <label class="form-label" for="floatingSearchableText" i18n:translate="label_filter_textsearch">Suche</label>
                    <input class="form-control" id="floatingSearchableText" name="SearchableText" type="text" value="" tal:attributes="value request/SearchableText|nothing">
                </div>
                <div class="col">
                    <input class="btn btn-primary" type="submit" name="search" value="Search" i18n:attributes="value label_filter_search">
                    <input class="btn btn-primary" type="submit" name="clear" value="Clear" tal:condition="request/SearchableText|nothing" i18n:attributes="value label_filter_clear">
                    <metal:addbutton define-slot="add-button"></metal:addbutton>
                </div>
            </form>
        </metal:def>

        <metal:def define-macro="batch_table"
            tal:define="batch batch|nothing">

            <tal:block tal:condition="batch">
            <div class="table-responsive">
            <table class="table table-condensed table-striped">
                <thead>
                    <tr>
                        <th i18n:translate="">Nr</th>
                        <th tal:repeat="col columns">
                            <span tal:replace="col/label" />
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr tal:repeat="item batch">
                        <tal:def define="obj item/getObject;
                                         obj_url obj/absolute_url">
                        <td tal:content="python:repeat['item'].number() + request.get('b_start', 0)"></td>
                        <td tal:repeat="col columns">
                            <span tal:replace="structure python: col.factory(obj)" />
                        </td>
                        <td class="text-end text-nowrap">
                            <a href="${obj_url}/@@edit" class="pat-plone-modal btn btn-sm btn-outline-primary" data-pat-plone-modal="modalSizeClass: modal-xl;"
                                ><tal:block replace="structure python:icons.tag('pencil')"/></a>
                            <a href="${obj_url}/delete_confirmation" class="pat-plone-modal btn btn-sm btn-outline-danger" data-pat-plone-modal='{"actionOptions": {"reloadWindowOnClose": true}}'
                                ><tal:block replace="structure python:icons.tag('trash')" /></a>
                        </td>
                        </tal:def>
                    </tr>
                </tbody>
            </table>
            </div>

            <div metal:use-macro="context/batch_macros/macros/navigation" />
            </tal:block>

            <tal:block condition="not:batch">
                <div class="alert alert-warning" i18n:translate="">No items found.</div>
            </tal:block>
        </metal:def>
    </body>
</html>

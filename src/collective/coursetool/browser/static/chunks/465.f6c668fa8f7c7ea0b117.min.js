"use strict";(self.webpackChunkcollective_coursetool=self.webpackChunkcollective_coursetool||[]).push([[465],{800:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(563);const r=n(505).A.getLogger("core dom"),i="__patternslib__data_prefix__",s="__patternslib__style__display";function a(e,t,n=!1,o=!1){let r=window.getComputedStyle(e).getPropertyValue(t);return(n||o)&&(r=parseFloat(r)||0),n&&!o&&(r=parseInt(Math.round(r),10)),r}const l=(e,t=document.body)=>{t===window&&(t=document.body);const n=Math.abs(e.getBoundingClientRect().left+t.scrollLeft-t.getBoundingClientRect().left-d.get_css_value(t,"border-left-width",!0));return{top:Math.abs(e.getBoundingClientRect().top+t.scrollTop-t.getBoundingClientRect().top-d.get_css_value(t,"border-top-width",!0)),left:n}},c=(e,t,n)=>e[`${i}${t}`]||n,u=(e,t,n)=>{e[`${i}${t}`]=n},d={toNodeArray:e=>(e.jquery||e instanceof NodeList?e=[...e]:e instanceof Array==!1&&(e=[e]),e),querySelectorAllAndMe:(e,t)=>{if(!e)return[];const n=[...e.querySelectorAll(t)];return e.matches(t)&&n.unshift(e),n},wrap:(e,t)=>{e.parentNode.insertBefore(t,e),t.appendChild(e)},hide:e=>{"none"!==e.style.display&&(e.style.display&&(e[s]=e.style.display),e.style.display="none")},show:e=>{const t=e[s]||null;e.style.display=t,delete e[s]},find_parents:(e,t)=>{const n=[];let o=e;for(;o;)o=o.parentNode?.closest?.(t),o&&n.push(o);return n},find_scoped:(e,t)=>(0===t.indexOf("#")?document:e).querySelectorAll(t),get_parents:e=>{const t=[];let n=e?.parentNode;for(;n;)t.push(n),n=n?.parentNode,n=n instanceof HTMLElement?n:null;return t},acquire_attribute:(e,t,n=!1,o=!1)=>{let r=e;const i=[];for(;r;){const e=r.getAttribute(t);if(e||n&&""===e){if(!o)return e;i.push(e)}r=r.parentElement}if(o)return i},is_visible:e=>e.offsetWidth>0&&e.offsetHeight>0,is_input:e=>/^(?:input|select|textarea|button)$/i.test(e.nodeName),create_from_string:e=>document.createRange().createContextualFragment(e.trim()),get_css_value:a,find_scroll_container:(e,t,n=document.body)=>{for(;e&&e!==document.body;){if(!t||"y"===t){let t=a(e,"overflow-y");if(["auto","scroll"].includes(t))return e}if(!t||"x"===t){let t=a(e,"overflow-x");if(["auto","scroll"].includes(t))return e}e=e.parentElement}return n},get_scroll_x:e=>void 0!==e.scrollLeft?e.scrollLeft:e.scrollX,get_scroll_y:e=>void 0!==e.scrollTop?e.scrollTop:e.scrollY,get_relative_position:l,scroll_to_element:(e,t,n=0,o="top")=>{const r=l(e,t),i={behavior:"auto"};"top"!==o&&"both"!==o||(i.top=r.top-n),"left"!==o&&"both"!==o||(i.left=r.left-n),t.scrollTo(i)},scroll_to_top:(e=document.body,t=0)=>{e.scrollTo({top:0-t,behavior:"auto"})},scroll_to_bottom:(e=document.body,t=0)=>{const n=(e===window?document.body:e).scrollHeight;e.scrollTo({top:n-t,behavior:"auto"})},get_data:c,set_data:u,delete_data:(e,t)=>{delete e[`${i}${t}`]},template:(e,t={})=>(r.warn("Using dom.template is not recommended due to a problem with Content-Security-Policy."),new Function("return `"+e+"`;").call(t)),get_visible_ratio:(e,t)=>{if(!e)return 0;const n=e.getBoundingClientRect(),o=t!==window?t.getBoundingClientRect():{top:0,bottom:window.innerHeight};let r=0;if(n.top<o.bottom&&n.bottom>o.top){const e=n.bottom-n.top;r=(Math.min(n.bottom,o.bottom)-Math.max(n.top,o.top))/e}return r},escape_css_id:e=>`#${CSS.escape(e.split("#")[1])}`,element_uuid:e=>{if(!c(e,"uuid",!1)){let t;if(window.crypto.randomUUID)t=window.crypto.randomUUID();else{const e=new Uint32Array(4);t=window.crypto.getRandomValues(e).join("")}u(e,"uuid",t)}return c(e,"uuid")},find_form:e=>e.closest(".pat-subform")||e.form||e.querySelector("input, select, textarea, button")?.form||e.closest("form"),add_event_listener:o.A.add_event_listener,remove_event_listener:o.A.remove_event_listener},p=d},563:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(633);const r=new Map,i=(e,t)=>{const n=e?[e]:r.keys();for(const e of n){if(!e?.removeEventListener)return;const n=r.get(e);if(!n)return;let i;i=t?[...n.entries()].filter((e=>o.A.regexp_from_wildcard(t).test(e[0]))):n.entries();for(const t of i||[])e.removeEventListener(t[1][0],t[1][1],t[1][2]),r.get(e).delete(t[0]),r.get(e).size||r.delete(e)}},s={add_event_listener:(e,t,n,o,s={})=>{if(!e?.addEventListener)return;i(e,n),r.has(e)||r.set(e,new Map);let a=o;!0===s?.once&&(a=t=>{r.get(e)?.delete(n),o(t)}),r.get(e).set(n,[t,a,s.capture?s:void 0]),e.addEventListener(t,a,s)},remove_event_listener:i,await_event:(e,t)=>new Promise((n=>e.addEventListener(t,n,{once:!0}))),await_pattern_init:e=>new Promise(((t,n)=>{e.one("init",(n=>{n.target===e.el&&(i(e.el,`basepattern-one--not-init.${e.name}.patterns`),t())})),e.one("not-init",(t=>{t.target===e.el&&(i(e.el,`basepattern-one--init.${e.name}.patterns`),n())}))})).catch((()=>{throw new Error(`Pattern "${e.name}" not initialized.`)})),generic_event:e=>new Event(e,{bubbles:!0,cancelable:!0}),blur_event:()=>new Event("blur",{bubbles:!1,cancelable:!1}),click_event:()=>new Event("click",{bubbles:!0,cancelable:!0}),change_event:()=>new Event("change",{bubbles:!0,cancelable:!1}),focus_event:()=>new Event("focus",{bubbles:!1,cancelable:!1}),input_event:()=>new Event("input",{bubbles:!0,cancelable:!1}),mousedown_event:()=>new Event("mousedown",{bubbles:!0,cancelable:!0}),mouseup_event:()=>new Event("mouseup",{bubbles:!0,cancelable:!0}),scroll_event:()=>new Event("scroll",{bubbles:!0,cancelable:!1}),submit_event:({submitter:e}={submitter:void 0})=>{const t=new Event("submit",{bubbles:!0,cancelable:!0});return t.submitter=e,t},dragstart_event:()=>new Event("dragstart",{bubbles:!0,cancelable:!0}),dragend_event:()=>new Event("dragend",{bubbles:!0,cancelable:!0})}},505:(e,t,n)=>{var o,r;n.d(t,{A:()=>d}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r});var i={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function s(){}function a(e,t){this._loggers={},this.name=e||"",this._parent=t||null,t||(this._enabled=!0,this._level=i.WARN)}function l(e){r=e}s.prototype={output:function(e,t,n){e&&n.unshift(e+":"),t<=i.DEBUG?(n.unshift("[DEBUG]"),console.log.apply(console,n)):t<=i.INFO?console.info.apply(console,n):t<=i.WARN?console.warn.apply(console,n):console.error.apply(console,n)}},a.prototype={getLogger:function(e){for(var t=e.split("."),n=this,o=this.name?[this.name]:[];t.length;){var r=t.shift();o.push(r),r in n._loggers||(n._loggers[r]=new a(o.join("."),n)),n=n._loggers[r]}return n},_getFlag:function(e){var t=this;for(e="_"+e;null!==t;){if(void 0!==t[e])return t[e];t=t._parent}return null},setEnabled:function(e){this._enabled=!!e},isEnabled:function(){this._getFlag("enabled")},setLevel:function(e){"number"==typeof e?this._level=e:"string"==typeof e&&(e=e.toUpperCase())in i&&(this._level=i[e])},getLevel:function(){return this._getFlag("level")},log:function(e,t){!t.length||!this._getFlag("enabled")||e<this._getFlag("level")||(t=Array.prototype.slice.call(t),r.output(this.name,e,t))},debug:function(){this.log(i.DEBUG,arguments)},info:function(){this.log(i.INFO,arguments)},warn:function(){this.log(i.WARN,arguments)},error:function(){this.log(i.ERROR,arguments)},fatal:function(){this.log(i.FATAL,arguments)}},l(new s),o=new a;for(var c,u=/loglevel(|-[^=]+)=([^&]+)/g;null!==(c=u.exec(window.location.search));){(""===c[1]?o:o.getLogger(c[1].slice(1))).setLevel(c[2].toUpperCase())}const d={Level:i,getLogger:o.getLogger.bind(o),setEnabled:o.setEnabled.bind(o),isEnabled:o.isEnabled.bind(o),setLevel:o.setLevel.bind(o),getLevel:o.getLevel.bind(o),debug:o.debug.bind(o),info:o.info.bind(o),warn:o.warn.bind(o),error:o.error.bind(o),fatal:o.fatal.bind(o),getWriter:function(){return r},setWriter:l}},329:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(511),r=n.n(o),i=n(800),s=n(505),a=n(633);const l=s.A.getLogger("registry"),c=/patterns-disable=([^&]+)/g,u=/patterns-dont-catch/g,d={};let p,h=!1;for(;null!==(p=c.exec(window.location.search));)d[p[1]]=!0,l.info("Pattern disabled via url config:",p[1]);for(;null!==(p=u.exec(window.location.search));)h=!0,l.info("I will not catch init exceptions");void 0===window.__patternslib_registry&&(window.__patternslib_registry={});const f=window.__patternslib_registry;void 0===window.__patternslib_registry_initialized&&(window.__patternslib_registry_initialized=!1);const g={patterns:f,init(){r()(document).ready((function(){window.__patternslib_registry_initialized||(window.__patternslib_registry_initialized=!0,l.debug("Loaded: "+Object.keys(g.patterns).sort().join(", ")),g.scan(document.body),l.debug("Finished initial scan."))}))},clear(){for(const e in g.patterns)delete g.patterns[e]},transformPattern(e,t){if(d[e])return void l.debug(`Skipping disabled pattern: ${e}.`);const n=g.patterns[e],o=n.transform||n.prototype?.transform;if(o)try{o(r()(t))}catch(t){if(h)throw t;l.error(`Transform error for pattern ${e}.`,t)}},initPattern(e,t,n){const o=r()(t),i=g.patterns[e],a=s.A.getLogger(`pat.${e}`);if(t.matches(i.trigger)){a.debug("Initialising.",t);try{i.init?i.init(o,null,n):new i(o,null,n),a.debug("done.")}catch(e){if(h)throw e;a.error("Caught error:",e)}}},orderPatterns:e=>(e.includes("validation")&&(e.splice(e.indexOf("validation"),1),e.unshift("validation")),e.includes("clone-code")&&(e.splice(e.indexOf("clone-code"),1),e.unshift("clone-code")),e),scan(e,t,n){if(!e)return;if("string"==typeof e)e=document.querySelector(e);else{if(e instanceof Text)return;e.jquery&&(e=e[0])}const o=[];t=this.orderPatterns(t||Object.keys(g.patterns));for(const n of t){this.transformPattern(n,e);const t=g.patterns[n];t.trigger&&o.unshift(t.trigger)}let r=i.A.querySelectorAllAndMe(e,o.map((e=>e.trim().replace(/,$/,""))).join(","));r=r.filter((e=>!(e.matches(".disable-patterns")||e?.parentNode?.closest?.(".disable-patterns")||e?.parentNode?.closest?.("pre")||e?.parentNode?.closest?.("template")||e.matches(".cant-touch-this")||e?.parentNode?.closest?.(".cant-touch-this"))));for(const e of r.reverse())for(const o of t)this.initPattern(o,e,n);document.body.classList.add("patterns-loaded")},register(e,t){if(!(t=t||e.name))return l.error("Pattern lacks a name.",e),!1;if(g.patterns[t])return l.debug(`Already have a pattern called ${t}.`),!1;if(g.patterns[t]=e,e.jquery_plugin){const n=("pat-"+t).replace(/-([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}));r().fn[n]=a.A.jqueryPlugin(e),r().fn[n.replace(/^pat/,"pattern")]=r().fn[n]}return l.debug(`Registered pattern ${t}`,e),window.__patternslib_registry_initialized&&(g.scan(document.body,[t]),l.debug(`Re-scanned dom with newly registered pattern ${t}.`)),!0}},m=g},633:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(511),r=n.n(o),i=n(800);r().fn.safeClone=function(){return this.clone()},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,o;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=0;o<i;){var s;o in r&&(s=r[o],e.call(n,s,o,r)),o++}});var s=function(e,t,n){return this.each((function(){var o,i=r()(this);if(o=e.init(i,n),t){if(void 0===o[t])return r().error("Method "+t+" does not exist on jQuery."+e.name),!1;if("_"===t.charAt(0))return r().error("Method "+t+" is private on jQuery."+e.name),!1;o[t].apply(o,[n])}})),this},a=function(e,t,n){var o=this;if(t){if(e[t])return e[t].apply(o,[o].concat([n]));r().error("Method "+t+" does not exist on jQuery."+e.name)}else e.init.apply(o,[o].concat([n]));return o};function l(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function c(e){let t=e.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");return t=t.replace(/[*]/g,".*"),t=new RegExp(`^${t}$`),t}function u(e,t=!1,n=0){e instanceof r()&&(e=e[0]);const o=e.getBoundingClientRect();return![o.top,o.bottom,o.left,o.right].every((e=>0===e))&&(t?o.top<=0+n&&o.bottom>=0+n:o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth))}var d={jqueryPlugin:function(e){return function(t,n){return 0===this.length?this:("object"==typeof t&&(n=t,t=void 0),"function"==typeof e?s.call(this,e,t,n):a.call(this,e,t,n))}},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:l,extend:function(e){if(!l(e))return e;for(var t,n,o=1,r=arguments.length;o<r;o++)for(n in t=arguments[o])hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},findLabel:function(e){for(var t,n=e.parentNode;n&&11!==n.nodeType;n=n.parentNode)if("LABEL"===n.tagName)return n;return e.id&&(t=r()('label[for="'+e.id+'"]')),t&&0===t.length&&e.form&&(t=r()('label[for="'+e.name+'"]',e.form)),t&&t.length?t[0]:null},regexp_from_wildcard:c,removeWildcardClass:function(e,t){if(e=d.ensureArray(e),-1===t.indexOf("*"))for(const n of e)n.classList.remove(t);else{const n=c(t);for(const t of e){const e=(t.getAttribute("class")||"").split(/\s+/);if(!e.length)continue;const o=e.filter((e=>!n.test(e)));o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class")}}},hideOrShow:(e,t,n,o)=>{e=i.A.toNodeArray(e);const s={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}},a="css"===n.transition||"none"===n.transition?null:n.effect.duration,l=e=>{e.classList.remove("in-progress"),e.classList.add(t?"visible":"hidden"),r()(e).trigger("pat-update",{pattern:o,action:"attribute-changed",dom:e,transition:"complete"})};for(const c of e)if(c.classList.remove("visible"),c.classList.remove("hidden"),c.classList.remove("in-progress"),a){const e=s[n.transition];c.classList.add("in-progress"),r()(c).trigger("pat-update",{pattern:o,action:"attribute-changed",dom:c,transition:"start"}),r()(c)[t?e.show:e.hide]({duration:a,easing:n.effect.easing,complete:()=>l(c)})}else"css"!==n.transition&&i.A[t?"show":"hide"](c),l(c)},addURLQueryParameter:function(e,t,n){var o=new RegExp("(\\?|\\&)"+t+"=.*?(?=(&|$))"),r=e.toString().split("#"),i=r[0],s=r[1],a=i;return a=o.test(i)?i.replace(o,"$1"+t+"="+n):/\?.+$/.test(i)?i+"&"+t+"="+n:i+"?"+t+"="+n,s&&(a+="#"+s),a},removeDuplicateObjects:function(e){const t=function(e,t){return this[e]===t};return e.reduce((function(e,n){let o=!1;for(const r of e)o=Object.keys(r).length===Object.keys(n).length&&0===Object.entries(r).filter((e=>!t.bind(n)(e[0],e[1]))).length;return o||e.push(n),e}),[])},mergeStack:function(e,t){const n=[];for(let e=0;e<t;e++)n.push({});for(const o of e){const e=o.length-1;for(let i=0;i<t;i++)n[i]=r().extend(n[i]||{},o[i>e?e:i])}return n},isElementInViewport:u,hasValue:function(e){return"INPUT"===e.tagName?"checkbox"===e.type||"radio"===e.type?e.checked:""!==e.value:"SELECT"===e.tagName?-1!==e.selectedIndex:"TEXTAREA"===e.tagName&&""!==e.value},parseTime:function(e){var t=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(e);if(!t)throw new Error("Invalid time");var n=parseFloat(t[1]);switch(t[2]){case"s":return Math.round(1e3*n);case"m":return Math.round(1e3*n*60);default:return Math.round(n)}},parseLength:function(e,t=null){const n=/^(\d+(?:\.\d+)?)\s*(\%?\w*)/.exec(e);if(!n)throw new Error("Invalid length");const o=parseFloat(n[1]);switch(n[2]){case"px":default:return Math.round(o);case"%":return t?t/100*Math.round(o):0;case"vw":return Math.round(o*window.innerWidth/100);case"vh":return Math.round(o*window.innerHeight/100);case"vmin":return Math.round(o*Math.min(window.innerWidth,window.innerHeight)/100);case"vmax":return Math.round(o*Math.max(window.innerWidth,window.innerHeight)/100)}},findRelatives:function(e){var t=r()(e),n=r()(e),o=r()();if(n=(n=n.add(t.closest("label"))).add(t.closest("fieldset")),e.id&&(o=r()("label[for='"+e.id+"']")),!o.length){var i=t.closest("form");i.length||(i=r()(document.body)),o=i.find("label[for='"+e.name+"']")}return n=n.add(o)},get_bounds:function(e){const t=e.getBoundingClientRect();return{x:parseInt(Math.round(t.x),10)||0,y:parseInt(Math.round(t.y),10)||0,top:parseInt(Math.round(t.top),10)||0,bottom:parseInt(Math.round(t.bottom),10)||0,left:parseInt(Math.round(t.left),10)||0,right:parseInt(Math.round(t.right),10)||0,width:parseInt(Math.round(t.width),10)||0,height:parseInt(Math.round(t.height),10)||0}},checkInputSupport:function(e,t){let n=!1;const o=document.createElement("input");return o.setAttribute("type",e),n=o.type==e,void 0!==t&&(o.setAttribute("value",t),n=o.value!==t),n},checkCSSFeature:(e,t,n="div")=>{let o=void 0!==(n=document.createElement(n)).style[e];return o&&void 0!==t&&(n.style[e]=t,o=n.style[e]===t),o},animation_frame:()=>new Promise(window.requestAnimationFrame),timeout:e=>new Promise((t=>setTimeout(t,e))),debounce:(e,t,n={timer:null},o=!0)=>(n.last_run=0,function(){const r=arguments;!o&&n.timer&&Date.now()-n.last_run<=t||(clearTimeout(n.timer),n.last_run=Date.now(),n.timer=setTimeout((()=>{e.apply(this,r)}),t))}),isIE:()=>!!document.documentMode,jqToNode:e=>(e.jquery&&(e=e[0]),e),ensureArray:(e,t)=>!!(NodeList.prototype.isPrototypeOf(e)||Array.isArray(e)||e.jquery)?t?[...e]:e:[e],localized_isodate:e=>{const t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getFullYear().toString()}-${n}-${t}`},escape_html:e=>{if(!e)return"";const t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML.replace(/"/g,"&quot;")},unescape_html:e=>{if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent.replace(/&quot;/g,'"')},is_iso_date_time:(e,t=!1)=>(t?/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d)?$/:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/).test(e),is_iso_date:e=>/^\d{4}-[01]\d-[0-3]\d$/.test(e),date_diff:(e,t)=>{const n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),o=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-o)/864e5)},threshold_list:(e=0)=>{let t=[];for(let n=1;n<=e;n++)t.push(n/e);return t.push(0),t.sort()},is_option_truthy:e=>![void 0,null,"none",!1,"false",""].includes(e),elementInViewport:e=>(console.warn("Deprecated. Use utils.isElementInViewport"),u(e))};const p=d},465:(e,t,n)=>{var o=n(511),r=n.n(o),i=n(329),s=n(505);const a={getOptions(e,t,n){n=n||{},0===e.length||r().nodeName(e[0],"body")||(n=this.getOptions(e.parent(),t,n));let o={};if(0!==e.length&&(o=e.data("pat-"+t),o&&"string"==typeof o)){const e={};r().each(o.split(";"),(function(t,n){(n=n.split(":")).reverse();let o=n.pop();o=o.replace(/^\s+|\s+$/g,""),n.reverse();let r=n.join(":");r=r.replace(/^\s+|\s+$/g,""),e[o]=r})),o=e}return r().extend(!0,{},n,o)}},l=s.A.getLogger("Patternslib Base"),c=function(e,t,n){e.jquery||(e=r()(e));const o=this.prototype.name,l=s.A.getLogger(`pat.${o}`);let c=e.data(`pattern-${o}`);if(void 0===c&&i.A.patterns[o])try{e.data(`pattern-${o}`,"initializing"),t="mockup"===this.prototype.parser?a.getOptions(e,o,t):t,c=new i.A.patterns[o](e,t,n)}catch(e){l.error(`Failed while initializing ${o} pattern.`,e)}return c},u=async function(e,t,n){e?.jquery&&0===e.length||!e?l.warn("No element given to pattern."):(e.jquery||(e=r()(e)),this.$el=e,this.el=e[0],this.options=r().extend(!0,{},this.defaults||{},t||{}),this.emit("pre-init"),await this.init(e,t,n),this.$el.data(`pattern-${this.name}`,this),this.el[`pattern-${this.name}`]=this,this.emit("init"))};u.prototype={constructor:u,on(e,t){this.$el.on(`${e}.${this.name}.patterns`,t)},one(e,t){this.$el.one(`${e}.${this.name}.patterns`,t)},emit(e,t){void 0===t&&(t=[]),this.$el.trigger(`${e}.${this.name}.patterns`,t)}},u.extend=function(e){const t=this;let n;if(!e)throw new Error("Pattern configuration properties required when calling Base.extend");n=Object.hasOwnProperty.call(e,"constructor")?e.constructor:function(){t.apply(this,arguments)},n.extend=u.extend,n.init=c,n.jquery_plugin=!0,n.trigger=e.trigger,n.parser=e?.parser||null;var o=function(){this.constructor=n};return o.prototype=t.prototype,n.prototype=new o,r().extend(!0,n.prototype,e),n.__super__=t.prototype,e.name?e.trigger?!1!==e.autoregister&&i.A.register(n,e.name):l.warn(`The pattern ${e.name} does not have a trigger attribute, it will not be registered.`):l.warn("This pattern without a name attribute will not be registered!"),n};const d=u;var p=n(633);class h{constructor(e){this.order=[],this.parameters={},this.attribute="data-pat-"+e,this.enum_values={},this.enum_conflicts=[],this.groups={},this.possible_groups={},this.log=s.A.getLogger(e+".parser"),this.group_pattern=/([a-z][a-z0-9]*)-([A-Z][a-z0-0\-]*)/i,this.json_param_pattern=/^\s*\[?\s*{/i,this.named_param_pattern=/^\s*([a-z][a-z0-9\-]*)\s*:(.*)/is,this.token_pattern=/((["']).*?(?!\\)\2)|\s*(\S+)\s*/g}_camelCase(e){return e.replace(/\-([a-z])/g,((e,t)=>t.toUpperCase()))}addAlias(e,t){if(!this.parameters[t])throw`Attempted to add an alias "${e}" for a non-existing parser argument "${t}".`;this.parameters[t].alias=e}addGroupToSpec(e){const t=e.name.match(this.group_pattern);if(t){const n=t[1],o=t[2];if(n in this.possible_groups){const e=this.possible_groups[n],t=e.name.match(this.group_pattern)[2];e.group=n,e.dest=t,this.groups[n]=new h,this.groups[n].addArgument(t,e.value,e.choices,e.multiple),delete this.possible_groups[n]}n in this.groups?(this.groups[n].addArgument(o,e.value,e.choices,e.multiple),e.group=n,e.dest=o):(this.possible_groups[n]=e,e.dest=this._camelCase(e.name))}return e}addJSONArgument(e,t){this.order.push(e),this.parameters[e]=this.addGroupToSpec({name:e,value:t,dest:e,group:null,type:"json"})}addArgument(e,t,n,o){const r={name:e,value:o&&!Array.isArray(t)?[t]:t,multiple:o,dest:e,group:null};if(n&&Array.isArray(n)&&n.length){r.choices=n,r.type=this._typeof(n[0]);for(const t of n)-1===this.enum_conflicts.indexOf(t)&&(t in this.enum_values?(this.enum_conflicts.push(t),delete this.enum_values[t]):this.enum_values[t]=e)}else"string"==typeof r.value&&"$"===r.value.slice(0,1)?r.type=this.parameters[r.value.slice(1)].type:r.type=this._typeof(o?r.value[0]:r.value);this.order.push(e),this.parameters[e]=this.addGroupToSpec(r)}_typeof(e){return null===e?"null":typeof e}_coerce(e,t){const n=this.parameters[e];if(typeof t!==n.type)try{switch(n.type){case"json":t=JSON.parse(t);break;case"boolean":if("string"==typeof t){t=t.toLowerCase();const e=parseInt(t,10);t=isNaN(e)?"true"===t||"y"===t||"yes"===t||"y"===t||"on"===t:!!e}else{if("number"!=typeof t)throw`Cannot convert value for ${e} to boolean.`;t=!!t}break;case"number":if("string"==typeof t){if(t=parseInt(t,10),isNaN(t))throw`Cannot convert value for ${e} to number.`}else{if("boolean"!=typeof t)throw`Cannot convert value for ${e} to number.`;t+=0}break;case"string":t=t.toString();break;case"null":case"undefined":break;default:throw`Do not know how to convert value for ${e} of type ${typeof t} to ${n.type}.`}}catch(e){return this.log.warn(e),null}return n.choices&&-1===n.choices.indexOf(t)?(this.log.warn(`Illegal value for ${e}: ${t}.`),null):t}_set(e,t,n){if(!(t in this.parameters))return void this.log.debug(`Ignoring value for unknown argument: ${t}.`);let o;if(this.parameters[t].multiple){o="string"==typeof n?n.split(/,+/):n,n=[];for(const e of o){const o=this._coerce(t,e.trim());null!==o&&n.push(o)}}else if(null===(n=this._coerce(t,n)))return;e[t]=n}_split(e){const t=[];return e.replace(this.token_pattern,((e,n,o,r)=>{n?t.push(n):r&&t.push(r)})),t}_parseExtendedNotation(e){const t={},n=e.replace(/;;/g,"\0x1f").replace(/&amp;/g,"&amp\0x1f").split(/;/).map((e=>e.replace(new RegExp("\0x1f","g"),";")));for(const o of n){if(!o)continue;const n=o.match(this.named_param_pattern);if(!n){this.log.warn(`Invalid parameter: ${o}: ${e}.`);continue}const r=n[1],i=n[2].trim(),s=Object.values(this.parameters).filter((e=>e.alias===r));if(1===s.length)this._set(t,s[0].name,i);else if(r in this.parameters)this._set(t,r,i);else{if(!(r in this.groups)){this.log.warn(`Unknown named parameter: ${n[1]}.`);continue}{const e=this.groups[r]._parseShorthandNotation(i);for(const n in e)this._set(t,r+"-"+n,e[n])}}}return t}_parseShorthandNotation(e){const t=this._split(e),n={};let o=0;for(;t.length;){const e=t.shift().trim();let r,i,s=!0;if("no-"===e.slice(0,3)?(r=!1,i=e.slice(3)):(r=!0,i=e),i in this.parameters&&"boolean"===this.parameters[i].type)s=!1,this._set(n,i,r);else if(i in this.enum_values)s=!1,this._set(n,this.enum_values[i],i);else{if(!s){t.unshift(e);break}this._set(n,this.order[o],e)}if(o++,o>=this.order.length)break}return t.length&&this.log.warn(`Ignore extra arguments: ${t.join(" ")}.`),n}_parse(e){if(!e)return{};if(e.match(this.json_param_pattern))try{return JSON.parse(e)}catch(t){this.log.warn(`Invalid JSON argument found: ${e}.`)}if(e.match(this.named_param_pattern))return this._parseExtendedNotation(e);const t=e.indexOf(";");if(-1===t)return this._parseShorthandNotation(e);const n=this._parseShorthandNotation(e.slice(0,t)),o=this._parseExtendedNotation(e.slice(t+1));for(const e in o)n[e]=o[e];return n}_defaults(e){const t={};for(const n in this.parameters)if("function"==typeof this.parameters[n].value)try{t[n]=this.parameters[n].value(e,n),this.parameters[n].type=typeof t[n]}catch(e){this.log.error(`Default function for ${n} failed.`)}else t[n]=this.parameters[n].value;return t}_cleanupOptions(e,t=!0){for(const t of Object.keys(e)){const n=this.parameters[t];void 0!==n&&(e[t]===n.value&&"string"==typeof n.value&&"$"===n.value.slice(0,1)&&(e[t]=e[n.value.slice(1)]))}if(t)for(const t of Object.keys(e)){const n=this.parameters[t];let o;void 0!==n&&(n.group?("object"!=typeof e[n.group]&&(e[n.group]={}),o=e[n.group]):o=e,n.dest!==t&&(o[n.dest]=e[t],delete e[t]))}return e}parse(e,t,n,o=!0,i=!0){e.jquery||(e=r()(e)),"boolean"==typeof t&&void 0===n&&(n=t,t={});const s=o?[[this._defaults(e)]]:[[{}]];let a,l=1;a=!o||e.hasClass("pat-modal")&&"data-pat-inject"===this.attribute?e:e.parents(`[${this.attribute}]`).addBack();for(const e of a){let t;const n=(r()(e).attr(this.attribute)||"").trim();if(!n)continue;const o=this._parse.bind(this);t=n.match(/&&/)?n.split(/\s*&&\s*/).map(o):o(n),Array.isArray(t)||(t=[t]),l=Math.max(t.length,l),s.push(t)}"object"==typeof t&&(Array.isArray(t)?(s.push(t),l=Math.max(t.length,l)):s.push([t])),n||(l=1);const c=p.A.removeDuplicateObjects(p.A.mergeStack(s,l)).map((e=>this._cleanupOptions(e,i)));return n?c:c[0]}}h.prototype.add_argument=h.prototype.addArgument;const f=h;var g=n(800),m=n(563),_={init:function(e){var t={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var n=r()(this);n.data("timeout")||(e&&r().extend(t,e),n.data("timeout",{lastEvent:new Date,trueTime:t.time,time:t.initialTime,untouched:!0,inExceptionArea:!1}),n.on("mouseover.timeout",_.mouseMoved),n.on("mouseenter.timeout",_.mouseMoved),r()(t.exceptionAreas).each((function(){n.find(this).live("mouseover.timeout",{parent:n},_.enteredException).live("mouseleave.timeout",{parent:n},_.leftException)})),t.initialTime>0?n.timeout("startTimer"):n.addClass("timeout"))}))},enteredException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!0,e.data.parent.data("timeout",t),e.data.parent.trigger("mouseover")},leftException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!1,e.data.parent.data("timeout",t)},destroy:function(){return this.each((function(){var e=r()(this),t=e.data("timeout");r()(window).off(".timeout"),t.timeout.remove(),e.removeData("timeout")}))},mouseMoved:function(){var e=r()(this),t=e.data("timeout");e.hasClass("timeout")?(e.removeClass("timeout"),e.timeout("startTimer")):t.untouched&&(t.untouched=!1,t.time=t.trueTime),t.lastEvent=new Date,e.data("timeout",t)},startTimer:function(){var e=r()(this),t=e.data("timeout"),n=function(){var t=e.data("timeout");if(t&&t.lastEvent)if(t.inExceptionArea)setTimeout(n,Math.floor(1e3*t.time));else{var o=new Date,r=Math.floor(1e3*t.time)-(o-t.lastEvent);r>0?setTimeout(n,r+100):e.addClass("timeout")}};setTimeout(n,Math.floor(1e3*t.time))}};r().fn.timeout=function(e){return _[e]?_[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void r().error("Method "+e+" does not exist on jQuery.timeout"):_.init.apply(this,arguments)},r().extend(r().expr[":"],{scrollable:function(e){return"scroll"===r()(e).css("overflow")||"scroll"===r()(e).css("overflowX")||"scroll"===r()(e).css("overflowY")||(e.clientHeight<e.scrollHeight&&(-1!==r().inArray(r()(e).css("overflowY"),["scroll","auto"])||-1!==r().inArray(r()(e).css("overflow"),["scroll","auto"]))||e.clientWidth<e.scrollWidth&&(-1!==r().inArray(r()(e).css("overflowX"),["scroll","auto"])||-1!==r().inArray(r()(e).css("overflow"),["scroll","auto"])))}}),r().fn.makeVisibleInScroll=function(e){var t=null;return"string"==typeof e?t=r()("#"+e):e&&(t=r()(e)),this.each((function(){var e,n=r()(this);e=t||((e=n.parents(":scrollable")).length>0?r()(e[0]):r()(window));var o=n.position().top,i=n.height()+o,s=e.scrollTop(),a=e.height()+s;o<s?e.scrollTop(o):i>a-e.height()/2&&e.scrollTop(o-(e.height()-n.height())/2)}))},r().fn.safeOffset=function(){var e,t=this[0],n={top:0,left:0};return t&&t.nodeType?(e=(t.ownerDocument||document).documentElement,r().contains(e,t)?r().fn.offset.apply(this,arguments):n):n},r().fn.setPositionAbsolute=function(e,t,n){return this.each((function(){var o=r()(this),i=r()(this).width(),s=e.safeOffset(),a=e.width(),l=e.height(),c=s.left+a-i+n,u=s.top+l+t;o.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:c+"px",top:u+"px",width:i}),o.remove().appendTo("body").show()}))},r().fn.positionAncestor=function(e){var t=0,n=0;return this.each((function(){var o=r()(this).closest(e);if(o.length&&"static"!==o.css("position")){var i=r()(this),s=i.safeOffset().left-parseInt(i.css("marginLeft"),10),a=i.safeOffset().top-parseInt(i.css("marginTop"),10),l=o.safeOffset().left+parseInt(o.css("borderLeftWidth"),10),c=o.safeOffset().top+parseInt(o.css("borderTopWidth"),10);return t=s-l,n=a-c,!1}})),{left:t,top:n}},r().fn.findInclusive=function(e){return this.find("*").addBack().filter(e)},r().fn.slideIn=function(e,t,n){return this.animate({width:"show"},e,t,n)},r().fn.slideOut=function(e,t,n){return this.animate({width:"hide"},e,t,n)},r().expr[":"].Contains=function(e,t,n){return r()(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},r().fn.scopedFind=function(e){return 0===e.indexOf("#")?r()(e):this.find(e)};const b=new f("checklist");b.addArgument("select",".select-all"),b.addArgument("deselect",".deselect-all"),b.addArgument("toggle",".toggle-all");d.extend({name:"checklist",trigger:".pat-checklist",jquery_plugin:!0,all_selects:[],all_deselects:[],all_toggles:[],all_checkboxes:[],all_radios:[],init(){this.options=b.parse(this.el,this.options,!1),this.$el.on("patterns-injected",this._init.bind(this)),this.change_handler=p.A.debounce((()=>{this.change_buttons_and_toggles(),this.change_checked()}),50),this._init()},_init(){this.all_checkboxes=this.el.querySelectorAll("input[type=checkbox]"),this.all_radios=this.el.querySelectorAll("input[type=radio]"),this.all_selects=g.A.find_scoped(this.el,this.options.select);for(const e of this.all_selects)m.A.add_event_listener(e,"click","pat-checklist--select-all--click",this.select_all.bind(this));this.all_deselects=g.A.find_scoped(this.el,this.options.deselect);for(const e of this.all_deselects)m.A.add_event_listener(e,"click","pat-checklist--deselect-all--click",this.deselect_all.bind(this));this.all_toggles=g.A.find_scoped(this.el,this.options.toggle);for(const e of this.all_toggles)m.A.add_event_listener(e,"click","pat-checklist--toggle-all--click",this.toggle_all.bind(this));this.change_buttons_and_toggles(),this.change_checked(),m.A.add_event_listener(this.el,"change","pat-checklist--change-handler--change",this.change_handler.bind(this))},destroy(){for(const e of this.all_selects)m.A.remove_event_listener(e,"pat-checklist--select-all--click");for(const e of this.all_deselects)m.A.remove_event_listener(e,"pat-checklist--deselect-all--click");for(const e of this.all_toggles)m.A.remove_event_listener(e,"pat-checklist--toggle-all--click");m.A.remove_event_listener(this.el,"pat-checklist--change-handler--change"),this.$el.off("patterns_injected")},find_siblings(e,t){let n,o=e.parentNode;for(;o;){if(n=o.querySelectorAll(`${t}:not(${this.options.toggle})`),n.length||o===this.el)return n;o=o.parentNode}},find_checkboxes(e,t){let n=[];return n=0===this.options.select.indexOf("#")?this.el.querySelectorAll(t):this.find_siblings(e,t),n},change_buttons_and_toggles(){let e;for(const t of this.all_selects)e=this.find_checkboxes(t,"input[type=checkbox]"),t.disabled=[...e].map((e=>e.matches(":checked"))).every((e=>!0===e));for(const t of this.all_deselects)e=this.find_checkboxes(t,"input[type=checkbox]"),t.disabled=[...e].map((e=>e.matches(":checked"))).every((e=>!1===e));for(const t of this.all_toggles)e=this.find_checkboxes(t,"input[type=checkbox]"),t.checked=[...e].map((e=>e.matches(":checked"))).every((e=>!0===e))},select_all(e){e.preventDefault();const t=this.find_checkboxes(e.target,"input[type=checkbox]:not(:checked)");for(const e of t)e.checked=!0,e.dispatchEvent(m.A.change_event())},deselect_all(e){e.preventDefault();const t=this.find_checkboxes(e.target,"input[type=checkbox]:checked");for(const e of t)e.checked=!1,e.dispatchEvent(m.A.change_event())},toggle_all(e){e.preventDefault();const t=e.target.checked,n=this.find_checkboxes(e.target,"input[type=checkbox]");for(const e of n)e.checked=t,e.dispatchEvent(m.A.change_event())},change_checked(){for(const e of[...this.all_checkboxes,...this.all_radios])for(const t of e.labels)t.classList.remove("checked","unchecked"),t.classList.add(e.checked?"checked":"unchecked");for(const e of g.A.querySelectorAllAndMe(this.el,"fieldset"))e.querySelectorAll(`input[type=checkbox]:checked:not(${this.options.toggle}), input[type=radio]:checked`).length?(e.classList.remove("unchecked"),e.classList.add("checked")):(e.classList.remove("checked"),e.classList.add("unchecked"))}})}}]);
//# sourceMappingURL=465.f6c668fa8f7c7ea0b117.min.js.map